"use strict";const collapsables=document.querySelectorAll(".js-collapsable"),collapsableHeaders=document.querySelectorAll(".js-collapsable-header");function handleCollapsables(e){const o=e.currentTarget.parentElement,i=o.classList.contains("open");for(const e of collapsables)e.classList.remove("open");!0===i?o.classList.remove("open"):o.classList.add("open")}for(let e=0;e<collapsables.length;e++)collapsableHeaders[e].addEventListener("click",handleCollapsables);const fr=new FileReader,uploadBtn=document.querySelector(".js__profile-trigger"),fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");function getImage(e){var o=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(o)}function writeImage(){srcPhoto=fr.result,upgradeImage(),handleFormData()}function fakeFileClick(){fileField.click()}uploadBtn.addEventListener("click",fakeFileClick),fileField.addEventListener("change",getImage);const colorCheck=document.querySelectorAll(".form__item"),colorCheck1=document.getElementById("design1"),colorCheck2=document.getElementById("design2"),colorCheck3=document.getElementById("design3"),colorCheck4=document.getElementById("design4"),colorCheck5=document.getElementById("design5"),colorCheck6=document.getElementById("design6"),nameCheck=document.querySelector(".viewer__image-name"),professionCheck=document.querySelector(".viewer__image-profession"),lineCheck=document.querySelector(".viewer__image-line"),iconsCheck=document.querySelectorAll(".viewer__icon-style");let palette,resultado="";function changeColor(){for(let e=0;e<colorCheck.length;e++)if(colorCheck[e].checked){resultado=colorCheck[e].value,palette=`${[e+1]}`,nameCheck.classList.remove("viewer__image-name","viewer__image-name-color2","viewer__image-name-color3","viewer__image-name-color4","viewer__image-name-color5","viewer__image-name-color6"),professionCheck.classList.remove("viewer__image-profession","viewer__image-profession-color2","viewer__image-profession-color3","viewer__image-profession-color4","viewer__image-profession-color5","viewer__image-profession-color6"),lineCheck.classList.remove("viewer__image-line","viewer__image-line-color2","viewer__image-line-color3","viewer__image-line-color4","viewer__image-line-color5","viewer__image-line-color6");for(let e=0;e<iconsCheck.length;e++)iconsCheck[e].classList.remove("viewer__icon-style","viewer__icon-style-color2","viewer__icon-style-color3","viewer__icon-style-color4","viewer__icon-style-color5","viewer__icon-style-color6");if("color1"===resultado){nameCheck.classList.add("viewer__image-name"),professionCheck.classList.add("viewer__image-profession"),lineCheck.classList.add("viewer__image-line");for(let e=0;e<iconsCheck.length;e++)iconsCheck[e].classList.add("viewer__icon-style")}else if("color2"===resultado){nameCheck.classList.add("viewer__image-name-color2"),professionCheck.classList.add("viewer__image-profession-color2"),lineCheck.classList.add("viewer__image-line-color2");for(let e=0;e<iconsCheck.length;e++)iconsCheck[e].classList.add("viewer__icon-style-color2")}else if("color3"===resultado){nameCheck.classList.add("viewer__image-name-color3"),professionCheck.classList.add("viewer__image-profession-color3"),lineCheck.classList.add("viewer__image-line-color3");for(let e=0;e<iconsCheck.length;e++)iconsCheck[e].classList.add("viewer__icon-style-color3")}else if("color4"===resultado){nameCheck.classList.add("viewer__image-name-color4"),professionCheck.classList.add("viewer__image-profession-color4"),lineCheck.classList.add("viewer__image-line-color4");for(let e=0;e<iconsCheck.length;e++)iconsCheck[e].classList.add("viewer__icon-style-color4")}else if("color5"===resultado){nameCheck.classList.add("viewer__image-name-color5"),professionCheck.classList.add("viewer__image-profession-color5"),lineCheck.classList.add("viewer__image-line-color5");for(let e=0;e<iconsCheck.length;e++)iconsCheck[e].classList.add("viewer__icon-style-color5")}else if("color6"===resultado){nameCheck.classList.add("viewer__image-name-color6"),professionCheck.classList.add("viewer__image-profession-color6"),lineCheck.classList.add("viewer__image-line-color6");for(let e=0;e<iconsCheck.length;e++)iconsCheck[e].classList.add("viewer__icon-style-color6")}}}colorCheck1.addEventListener("click",changeColor),colorCheck2.addEventListener("click",changeColor),colorCheck3.addEventListener("click",changeColor),colorCheck4.addEventListener("click",changeColor),colorCheck5.addEventListener("click",changeColor),colorCheck6.addEventListener("click",changeColor);const resetBtn=document.getElementById("reset"),form=document.getElementById("form");function resetViewer(){viewerName.innerHTML="Nombre Apellido",viewerJob.innerHTML="Front-end developer",profileImage.style.backgroundImage="url(./assets/images/natalie-portman.jpg)",profilePreview.style.backgroundImage="url()";for(let e=0;e<iconsCheck.length;e++)iconsCheck[0].innerHTML='<i class="fas fa-mobile-alt"></i></a>',iconsCheck[1].innerHTML='<i class="far fa-envelope"></i></a>',iconsCheck[2].innerHTML='<i class="fab fa-linkedin-in"></i></a>',iconsCheck[3].innerHTML='<i class="fab fa-github-alt"></i></a>'}function resetColor(){for(let e=0;e<colorCheck.length;e++){colorCheck[e].checked&&(resultado=colorCheck[e].value),nameCheck.classList.remove("viewer__image-name","viewer__image-name-color2","viewer__image-name-color3","viewer__image-name-color4","viewer__image-name-color5","viewer__image-name-color6"),professionCheck.classList.remove("viewer__image-profession","viewer__image-profession-color2","viewer__image-profession-color3","viewer__image-profession-color4","viewer__image-profession-color5","viewer__image-profession-color6"),lineCheck.classList.remove("viewer__image-line","viewer__image-line-color2","viewer__image-line-color3","viewer__image-line-color4","viewer__image-line-color5","viewer__image-line-color6");for(let e=0;e<iconsCheck.length;e++)iconsCheck[e].classList.remove("viewer__icon-style","viewer__icon-style-color2","viewer__icon-style-color3","viewer__icon-style-color4","viewer__icon-style-color5","viewer__icon-style-color6");nameCheck.classList.add("viewer__image-name"),professionCheck.classList.add("viewer__image-profession"),lineCheck.classList.add("viewer__image-line");for(let e=0;e<iconsCheck.length;e++)iconsCheck[e].classList.add("viewer__icon-style")}}function resetForm(){form.reset(),resetViewer(),resetColor(),localStorage.removeItem("userData")}resetBtn.addEventListener("click",resetForm);const fullName=document.querySelector(".inputName"),job=document.querySelector(".inputJob"),mail=document.querySelector(".mail"),tel=document.querySelector(".tel"),linkedin=document.querySelector(".linkedin"),github=document.querySelector(".Github"),viewerName=document.querySelector(".js-Name"),viewerJob=document.querySelector(".js-Job"),formData=document.querySelector(".js-form");function upgradeName(){viewerName.innerHTML=`${fullName.value}`,""===fullName.value&&(viewerName.innerHTML="Nombre Apellido")}function upgradeJob(){viewerJob.innerHTML=`${job.value}`,""===job.value&&(viewerJob.innerHTML="Front-end developer")}function upgradeTel(){for(let e=0;e<iconsCheck.length;e++);iconsCheck[0].innerHTML=`<a href="tel:${tel.value}" target="_blank"><i class="fas fa-mobile-alt"></i></a>`}function upgradeMail(){for(let e=0;e<iconsCheck.length;e++);iconsCheck[1].innerHTML=`<a href="mailto:${mail.value}" target="_blank"><i class="far fa-envelope"></i></a>`}function upgradeLinkedin(){for(let e=0;e<iconsCheck.length;e++);iconsCheck[2].innerHTML=`<a href="https://www.linkedin.com/in/${linkedin.value}" target="_blank"><i class="fab fa-linkedin-in"></i></a>`}function upgradeGithub(){for(let e=0;e<iconsCheck.length;e++);iconsCheck[3].innerHTML=`<a href="https://github.com/${github.value}" target="_blank"><i class="fab fa-github-alt"></i></a>`}let srcPhoto,src;function upgradeImage(){profileImage.style.backgroundImage=`url(${srcPhoto})`,profilePreview.style.backgroundImage=`url(${srcPhoto})`}const handleFormData=()=>{console.log(palette);const e={palette:palette,name:fullName.value,job:job.value,mail:mail.value,phone:tel.value,linkedin:linkedin.value,github:github.value,photo:srcPhoto};localStorage.setItem("userData",JSON.stringify(e))},getLocalStorage=()=>{const e=JSON.parse(localStorage.getItem("userData"));e&&(fullName.value=e.name,job.value=e.job,mail.value=e.mail,tel.value=e.phone,linkedin.value=e.linkedin,github.value=e.github,srcPhoto=e.photo,"1"===e.palette?colorCheck1.checked=!0:"2"===e.palette?colorCheck2.checked=!0:"3"===e.palette?colorCheck3.checked=!0:"4"===e.palette?colorCheck4.checked=!0:"5"===e.palette?colorCheck5.checked=!0:"6"===e.palette&&(colorCheck6.checked=!0),upgradeDataViewer())},upgradeDataViewer=()=>{upgradeName(),upgradeJob(),upgradeMail(),upgradeTel(),upgradeLinkedin(),upgradeGithub(),changeColor(),upgradeImage()};fullName.addEventListener("keyup",upgradeDataViewer),job.addEventListener("keyup",upgradeDataViewer),mail.addEventListener("keyup",upgradeDataViewer),tel.addEventListener("keyup",upgradeDataViewer),linkedin.addEventListener("keyup",upgradeDataViewer),github.addEventListener("keyup",upgradeDataViewer),formData.addEventListener("keyup",handleFormData),getLocalStorage();for(let e=0;e<colorCheck.length;e++)colorCheck[e].addEventListener("click",handleFormData);const shareBtn=document.querySelector(".js-shareBtn"),shareLink=document.querySelector(".js-shareLink"),twitterLink=document.querySelector(".js-twitterLink"),shareMessage=document.querySelector(".js-shareMessage");function createCard(e){e.preventDefault();const o={palette:palette,name:fullName.value,job:job.value,email:mail.value,phone:tel.value,linkedin:linkedin.value,github:github.value,photo:fr.result};fetch("https://us-central1-awesome-cards-cf6f0.cloudfunctions.net/card/",{method:"POST",body:JSON.stringify(o),headers:{"content-type":"application/json"}}).then(function(e){return e.json()}).then(function(e){console.log(e),console.log(e.cardURL),shareLink.innerHTML=`${e.cardURL}`,shareLink.setAttribute("href",`${e.cardURL}`),twitterLink.setAttribute("href",`https://twitter.com/intent/tweet?text=${e.cardURL}`),shareMessage.classList.remove("hidden")})}shareBtn.addEventListener("click",createCard);